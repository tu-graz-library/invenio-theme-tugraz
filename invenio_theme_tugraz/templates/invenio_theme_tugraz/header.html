{#
  Copyright (C) 2020 mojib wali.

  invenio-theme-tugraz is free software; you can redistribute it and/or
  modify it under the terms of the MIT License; see LICENSE file for more
  details.
#}


    <header>

      {%- block navbar %}
      <nav class="navbar navbar-default navbar-static-top">

        <div class="container">

          {%- block navbar_header %}

          <div class="header">
            <div class="main-menu" id="heading">
              <div class="main-menu-box">

                <div class="main-menu-entry">

                  <a href="{{url_for('invenio_theme_frontpage.index')}}" title="Home">
                    <svg shape-rendering="geometricPrecision" id="int-menu-q-home-icon"
                         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg"
                         version="1.1" xml:space="preserve" height="36.997" width="35.969"
                         enable-background="new 0 0 595.28 841.89" y="0px" x="0px"
                         xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"
                         viewBox="0 0 35.969 36.997451">
                            <polyline style="stroke:#E4154B;stroke-linecap:square;stroke-width:4;fill:none"
                                      points="282.72 437.28 282.72 414.77 297.71 406.69 312.69 414.77 312.69 437.28"
                                      transform="translate(-279.72 -403.28)">
                            </polyline>

                        </svg>
                  </a>
                </div>


                {%- if not current_user.is_authenticated %}
                <div class="main-menu-entry">

                  <a href="{{url_for_security('login', next=request.path)}}">Login
                    <svg shape-rendering="optimizeQuality" class="int-menu-q-open-icon"
                         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg"
                         height="5.2753mm" width="8.7548mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#"
                         xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 31.02118 18.692033">
                      <g style="stroke-width:2.25" transform="translate(-164.49 -416.85)">
                        <path
                          style="stroke-linejoin:round;stroke:#E4154B;stroke-linecap:round;stroke-width:2.5;fill:none"
                          d="m165.63 417.99 14.375 16.43 14.375-16.43"></path>
                      </g>
                    </svg>
                  </a>
                </div>


                {% else %}

                <!---Name or email of the logged in user-->
                <div class="main-menu-entry">
                  <i class="fa fa-user mr-2"></i>
                  {{ current_user.profile.full_name if current_user.profile.full_name else current_user.email }}
                </div>


                <div class="main-menu-entry">

                  <!--- Looping the link we have for the user which is logged in-->
                  {%- for item in current_menu.submenu('settings').children if item.visible %}


                  <a class="dropdown-item" href="{{ item.url }}">
                    {{ item.text|safe }}
                    <svg shape-rendering="optimizeQuality" class="int-menu-q-open-icon"
                         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg"
                         height="5.2753mm" width="8.7548mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#"
                         xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 31.02118 18.692033">
                      <g style="stroke-width:2.25" transform="translate(-164.49 -416.85)">
                        <path
                          style="stroke-linejoin:round;stroke:#E4154B;stroke-linecap:round;stroke-width:2.5;fill:none"
                          d="m165.63 417.99 14.375 16.43 14.375-16.43"></path>
                      </g>
                    </svg>
                  </a>
                  {%- endfor %}

                  <!--- Logout link -->


                  <a class="dropdown-item" href="{{url_for_security('logout')}}">{{_('Logout')}}
                    <svg shape-rendering="optimizeQuality" class="int-menu-q-open-icon"
                         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg"
                         height="5.2753mm" width="8.7548mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#"
                         xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 31.02118 18.692033">
                      <g style="stroke-width:2.25" transform="translate(-164.49 -416.85)">
                        <path
                          style="stroke-linejoin:round;stroke:#E4154B;stroke-linecap:round;stroke-width:2.5;fill:none"
                          d="m165.63 417.99 14.375 16.43 14.375-16.43"></path>
                      </g>
                    </svg>
                  </a>


                </div>
                {% endif %}


              </div>
            </div>


            <!----MENU------------------------------------------------------------->
            <div class="short-menu" id="all-menu-top-table">

              <div class="short-menu-left">

                <div id="all-menu-top-left-item">
                  <div class="short-menu-left-lang">
                    <!-- TODO language change not necessary because we have no english version -->

                  </div>

                  <div class="short-menu-left-search">

                    <a href="/search">

                      <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                           xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                           xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#"
                           viewBox="0 0 26.01515 26.01515" width="26.015" height="26.015" class="all-menu-top-icon">
                        <g transform="translate(1,1)" stroke-miterlimit="10"
                           style="stroke-linejoin:round;stroke:#000;stroke-miterlimit:10;stroke-width:2;fill:none">
                          <circle style="stroke-miterlimit:10;stroke-width:2" r="8" cx="8.5" cy="8.5"></circle>
                          <path d="m14.156 14.156 9.344 9.344"
                                style="stroke-width:2;stroke-miterlimit:10;stroke-linecap:round"></path>
                        </g>
                      </svg>

                    </a>
                  </div>

                </div>


              </div>

              <div class="short-menu-right">
                <div class="short-menu-right-h" onclick="hide();">

                  <i class="fa fa-bars fa-lg"></i><span style="margin-left:3px;">Menu</span>

                </div>
              </div>

            </div>
            <!----END MENU------------------------------------------------------------->


            <div class="affiliation" id="int-header">

              <div class="affiliation-text">
                <a title="RDM" href="{{url_for('invenio_theme_frontpage.index')}}">
                  TU Graz
                  <br> Research Data Management
                </a>
              </div>

              <div class="affiliation-spacer"></div>

              <div class="affiliation-logo" id="int-header-logo">
                <a href="https://www.tugraz.at" title="TU Graz Home" target="_blank">
                  <div class="affiliation-logo-claim">
                    <div class="affiliation-logo-claim-single">WISSEN</div>
                    <div class="affiliation-logo-claim-single">TECHNIK</div>
                    <div class="affiliation-logo-claim-single">LEIDENSCHAFT</div>
                  </div>
                  <svg id="int-header-logo-img"
                       xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                       xmlns="http://www.w3.org/2000/svg" xml:space="preserve"
                       height="51.862" width="141.1" version="1.1" xmlns:cc="http://creativecommons.org/ns#"
                       xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 141.10001 51.862499">
    <g transform="matrix(1.25 0 0 -1.25 0 51.862)"><g transform="scale(.1)"><path style="fill:#e4154b" d="m0 103.73h207.45v207.46l-207.45 0.01v-207.47z"></path>
      <path style="fill:#e4154b" d="m228.19 103.73h207.46v207.46h-207.46v-207.46z"></path>
      <path style="fill:#e4154b" d="m456.41 103.73h207.44v207.46h-207.44v-207.46z"></path>
      <path style="fill:#e4154b" d="m103.72 0h207.47v207.46h-207.47v-207.46z"></path>
      <path style="fill:#e4154b" d="m352.68 207.46h207.44v207.46h-207.44v-207.46z"></path>
      <path style="fill:#231f20" d="m751.04 277.91h-66.426v33.195h171.19v-33.195h-66.407v-173.73h-38.359v173.73"></path>
      <path style="fill:#231f20"
            d="m1048.3 180.22c0-12.461-2.25-23.711-6.72-33.75-4.5-10.039-10.61-18.555-18.36-25.567-7.76-7.031-16.9-12.421-27.503-16.21-10.605-3.809-22.109-5.7036-34.551-5.7036-12.422 0-23.945 1.8946-34.551 5.7036-10.605 3.789-19.824 9.179-27.656 16.21-7.851 7.012-13.984 15.528-18.34 25.567-4.394 10.039-6.582 21.289-6.582 33.75v130.89h38.379v-129.59c0-5.039 0.801-10.351 2.442-15.898 1.64-5.547 4.336-10.664 8.125-15.332s8.789-8.516 15.039-11.523c6.211-3.008 13.926-4.512 23.144-4.512 9.199 0 16.914 1.504 23.145 4.512 6.23 3.007 11.25 6.855 15.039 11.523 3.77 4.668 6.48 9.785 8.12 15.332 1.63 5.547 2.45 10.859 2.45 15.898v129.59h38.38v-130.89"></path>
      <path style="fill:#231f20"
            d="m832.56 75.664c-7.597 3.2812-17.46 4.8632-25.332 4.8632-22.929 0-35.605-14.434-35.605-33.184 0-18.613 12.383-32.637 33.34-32.637 5.351 0 9.59 0.5274 12.969 1.3086v23.867h-20.84v14.414h39.687v-49.297c-10.41-2.6172-21.25-4.707-31.816-4.707-31.797 0-53.906 14.805-53.906 45.742 0 31.348 20.566 48.906 53.906 48.906 11.406 0 20.41-1.4453 28.867-3.8086l-1.27-15.469"></path>
      <path style="fill:#231f20"
            d="m856.2 69.375h16.758v-15.332h0.293c0.84 6.289 8.574 16.914 19.824 16.914 1.836 0 3.828 0 5.782-0.5273v-17.715c-1.68 0.918-5.059 1.4454-8.457 1.4454-15.333 0-15.333-17.832-15.333-27.52v-24.785h-18.867v67.52"></path>
      <path style="fill:#231f20"
            d="m913.75 65.84c7.324 3.1446 17.187 5.1172 25.215 5.1172 22.09 0 31.23-8.5351 31.23-28.457v-8.6523c0-6.8165 0.156-11.934 0.293-16.914 0.137-5.1172 0.41-9.8242 0.84-15.078h-16.602c-0.703 3.5352-0.703 8.0078-0.839 10.098h-0.293c-4.36-7.4618-13.81-11.661-22.38-11.661-12.793 0-25.332 7.207-25.332 20.059 0 10.078 5.195 15.976 12.383 19.258 7.187 3.2812 16.464 3.9453 24.355 3.9453h10.41c0 10.879-5.195 14.551-16.328 14.551-8.008 0-16.035-2.8907-22.363-7.3438l-0.586 15.078zm22.11-52.715c5.782 0 10.274 2.3633 13.223 6.0352 3.105 3.8086 3.945 8.6523 3.945 13.906h-8.164c-8.437 0-20.957-1.3086-20.957-11.68 0-5.7617 5.195-8.2617 11.953-8.2617"></path>
      <path style="fill:#231f20"
            d="m985.69 69.375h57.422v-14.414l-36.04-39.473h37.31v-13.633h-60.235v14.297l36.715 39.59h-35.172v13.633"></path>
      <path style="fill:#e4154b" d="m1059.6 0h69.102v69.121h-69.102v-69.121z"></path>
    </g>
    </g>
    </svg>
                </a>
              </div>


            </div>

            {%- endblock navbar_header %}


            {%- block flashmessages %}
            {%- from "invenio_theme/macros/messages.html" import flashed_messages with context -%}
            {{ flashed_messages() }}
            {%- endblock %}
            {%- block breadcrumbs %}
            {%- include "invenio_theme/breadcrumbs.html" %}
            {%- endblock breadcrumbs %}


            {%- block navbar_inner %}
            <div id="navbar" class="navbar-collapse collapse">

              {%- block navbar_nav %}
              <!----------------search bar--------------------------->
              {%- if config.THEME_SEARCHBAR %}
              {%- block navbar_search %}
              <div align="center">
                <form class="navbar-form navbar-center" action="/search" role="search">
                  <div class="form-group">
                    <div class="input-group">
                      <input type="text" class="form-control" name="q" placeholder="{{_('Search')}}">
                      <div class="input-group-btn">
                        <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              {%- endblock navbar_search %}
              {%- endif %}


              <ul class="nav navbar-nav">
                {%- for item in current_menu.submenu('main').children|sort(attribute='order') if item.visible recursive %}
                {%- if item.children %}
                <li class="dropdown{{ ' active' if item.active else ''}}">
                  <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"
                     href="{{ item.url }}">{{ item.text|safe }} <b class="caret"></b></a>
                  <ul class="dropdown-menu">{{ loop(item.children|sort(attribute='order')) }}</ul>
                </li>
                {%- else %}
                <li {{
                ' class="active"'|safe if item.active and loop.depth == 1 else '' }}><a href="{{ item.url }}">{{
                item.text|safe }}</a></li>
                {%- endif %}
                {%- endfor %}
              </ul>


              {%- endblock navbar_nav %}


            </div>

            {%- endblock navbar_inner %}

          </div>

          {%- endblock navbar %}

        </div>
      </nav>


      <script>
    function hide() {
        var x = document.getElementById('heading');

        if (x.style.display === "none") {
          x.style.display = "block";
        } else {
          x.style.display = "none";
        }

      }

      </script>


    </header>
